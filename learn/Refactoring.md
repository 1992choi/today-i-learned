# 개요
- 인프런의 '코딩으로 학습하는 리팩토링'

### 냄새 1. 이해하기 힘든 이름
- 깔끔한 코드에서 가장 중요한 것 중 하나가 바로 “좋은 이름”이다.
- 함수, 변수, 클래스, 모듈의 이름 등 모두 어떤 역할을 하는지 어떻게 쓰이는지 직관적이어야 한다.
- 사용할 수 있는 리팩토링 기술
  - 함수 선언 변경하기 (Change Function Declaration)
  - 변수 이름 바꾸기 (Rename Variable)
  - 필드 이름 바꾸기 (Rename Field)

### 냄새 2. 중복 코드
- 중복 코드의 단점
  - 비슷한지, 완전히 동일한 코드인지 주의 깊게 봐야한다.
  - 코드를 변경할 때, 동일한 모든 곳의 코드를 변경해야 한다.
- 사용할 수 있는 리팩토링 기술
  - 동일한 코드를 여러 메소드에서 사용하는 경우, 함수 추출하기 (Extract Function)
    - '의도'와 '구현' 분리하기
      - 어떠한 목적(=의도)을 위해 기술되었는지가 없으면 구현을 위한 코드일 가능성이 높다.
      - 이는 가독성을 낮추므로 분리할 필요가 있다.
  - 코드가 비슷하게 생겼지만 완전히 같지는 않은 경우, 코드 분리하기 (Slide Statements)
    - 관련있는 코드끼리 묶여있어야 코드를 더 쉽게 이해할 수 있다.
    - 함수에서 사용할 변수를 상단에 미리 정의하기 보다는, 해당 변수를 사용하는 코드 바로 위에 선언.
    - 관련있는 코드끼리 묶은 다음, 함수 추출하기 (Extract Function)를 사용해서 더 깔끔하게 분리.
  - 여러 하위 클래스에 동일한 코드가 있다면, 메소드 올리기 (Pull Up Method)
    - 중복 코드는 당장은 잘 동작하더라도 미래에 버그를 만들어 낼 빌미를 제공한다.
    - 여러 하위 클래스에 동일한 코드가 있다면, 손쉽게 이 방법을 적용할 수 있다.

### 냄새 3. 긴 함수
- 짧은 함수 vs 긴 함수
  - 긴 함수의 단점 : 함수가 길 수록 더 이해하기 어렵다.
  - 짧은 함수의 단점 : 더 많은 문맥 전환을 필요로 한다.
  - 작은 단위의 함수는 더 많은 서브루틴 호출로 인한 오버헤드가 발생할 수 있지만, 현재에서는 성능이 좋아져 무시할만한 수준이다.
  - 함수를 작게 나눈 후 '좋은 이름'을 사용한다면, 함수의 이름만 보고 기능을 짐작할 수 있다.
- 사용할 수 있는 리팩토링 기술
  - 거의 대부분은 '함수 추출하기'로 해결할 수 있다.
  - 함수로 분리하면서 해당 함수로 전달해야 할 매개변수가 많아진다면 다음과 같은 리팩토링을 고려해볼 수 있다.
    - 임시 변수를 질의 함수로 바꾸기 (Replace Temp with Query)
    - 매개변수 객체 만들기 (Introduce Parameter Object)
      - 같은 매개변수들이 여러 메소드에 걸쳐 나타난다면 그 매개변수들을 묶은 자료 구조를 만들 수 있다.
    - 객체 통째로 넘기기 (Preserve Whole Object)
      - 어떤 한 레코드에서 구할 수 있는 여러 값들을 함수에 전달하는 경우, 해당 매개변수를 레코드 하나로 교체할 수 있다.
      - 매개변수 목록을 줄일 수 있다는 장점이 있지만, 의존성이 생길 수도 있다.
  - '조건문 분해하기 (Decompose Conditional)'를 사용해 조건문을 분리할 수 있다.
    - 기술적으로는 '함수 추출하기'와 동일한 리팩토링이지만 의도만 다를 뿐이다.
  - 같은 조건으로 여러개의 Switch 문이 있다면, '조건문을 다형성으로 바꾸기 (Replace Conditional with Polymorphism)'를 사용할 수 있다.
    - 여러 타입에 따라 각기 다른 로직으로 처리해야 하는 경우에 다형성을 적용해서 조건문을 보다 명확하게 분리할 수 있다.
  - 반복문 안에서 여러 작업을 하고 있어서 하나의 메소드로 추출하기 어렵다면, '반복문 쪼개기 (Split Loop)'를 적용할 수 있다.
    - 하나의 반복문에서 여러 다른 작업을 하는 코드를 쉽게 찾아볼 수 있다.
      - 반복문을 여러개로 쪼개면 보다 쉽게 이해하고 수정할 수 있다.
        - ex. 하나의 for문 안에서 여러 실행코드가 있다고하면, 동일한 반복문을 쪼개서 관심사 별로 묶는 기법 
    - 성능 문제를 야기할 수 있지만, '리팩토링'은 '성능 최적화'와 별개의 작업이다. 리팩토링을 마친 이후에 성능 최적화 시도할 수 있다.

### 냄새 4. 긴 매개변수 목록
- 매개변수가 많을수록 함수의 역할을 이해하기 어려워진다.
- 매개변수를 다시 확인할 필요성이 있다.
  - 과연 그 함수는 한가지 일을 하고 있는게 맞는가?
  - 불필요한 매개변수는 없는가?
  - 하나의 레코드로 뭉칠 수 있는 매개변수 목록은 없는가?
- 어떤 매개변수를 다른 매개변수를 통해 알아낼 수 있다면, “매개변수를 질의 함수로 바꾸기 (Replace Parameter with Query)”를 사용할 수 있다.
- 기존 자료구조에서 세부적인 데이터를 가져와서 여러 매개변수로 넘기는 대신, “객체 통째로 넘기기 (Preserve Whole Object)”를 사용할 수 있다.
- 일부 매개변수들이 대부분 같이 넘겨진다면, “매개변수 객체 만들기 (Introduce Parameter Object)”를 적용할 수 있다.
- 매개변수가 플래그로 사용된다면, “플래그 인수 제거하기 (Remove Falg Argument)”를 사용할 수 있다.
- 여러 함수가 일부 매개변수를 공통적으로 사용한다면 “여러 함수를 클래스로 묶기 (Combine Functions into Class)”를 통해 매개변수를 해당 클래스의 필드로 만들고 매서드에 전달해야 할 매개변수 목록을 줄일 수 있다.